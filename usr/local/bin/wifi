#!/usr/bin/env python3

from sh import ls, nmcli
from argparse import ArgumentParser
from getpass import getpass

known_networks = {
    "SSID": "Password"
}

parser = ArgumentParser()
parser.add_argument("SSID")
args = parser.parse_args()

if (args.SSID in known_networks or args.SSID.title() in known_networks):
    try:
        nmcli("dev", "wifi", "connect", args.SSID, "password", known_networks[args.SSID])
    except:
        nmcli("dev", "wifi", "connect", args.SSID.title(), "password", known_networks[args.SSID.title()])
    else:
        print("Network '{}' not found".format(args.ssid))
else:
    known_networks[args.SSID] = getpass()
    try:
        nmcli("dev", "wifi", "connect", args.SSID, "password", known_networks[args.SSID])
    except:
        print("Unknown network '{}'".format(args.SSID))
